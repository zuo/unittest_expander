Changes
=======

0.X.X (2021-10-XX)
------------------

* Now, the following versions of Python are officially supported: 2.7
  and from 3.4 to 3.10. Note: the versions 2.6, 3.2 and 3.3 are *no
  longer* supported.

* Now, if two (or more) parameter collections are combined to make a
  Cartesian product of them (as an effect of decorating a test with
  two or more **foreach()** invocations), and a conflict is detected
  between any *keyword arguments* previously used to create **param()**
  instances that are now combined, then **expand()** raises
  **ValueError** (previously no exception was raised; instead of that,
  a keyword argument being a component of one **param()** was silently
  overwritten by the corresponding keyword argument being a component
  of the other **param()**).

* When it comes to **param.context()** (and **paramseq.context()**),
  now the standard Python context manager's mechanism of suppressing
  exceptions by making **__exit__()** return logical *true* is,
  by default, consistently *disabled* (i.e. exceptions are *not*
  suppressed, as it could easy become a cause of silent tests' defects;
  previously exceptions were suppressed in the case of applying
  **foreach()** decorators to test *classes*, but not in the case
  of applying them to test *methods*).  The mechanism of exception
  suppression can be explicitly *enabled* on a per case by case basis by
  passing ``__enable_exc_suppress__=True`` to **param.context()** (or to
  **paramseq.context()**).

* **Deprecation notice:** decorating test *classes* with **foreach()**
  is now deprecated (causing emission of **DeprecationWarning**); in
  future versions of *unittest_expander* the feature will be either
  **removed** or deeply **changed** (in a backwards-incompatible way),
  as its current semantics is deemed broken by design (in particular,
  when it comes to, but not limited to, the lack of composability --
  which becomes apparent when **expand()**-ing is combined with class
  inheritance...).

* A bugfix: now test methods with *keyword-only* arguments and/or *type
  annotations* are supported (previously **ValueError** was raised by
  **expand()** if such a method was decorated with **foreach()**).
  The background is that, from now on, for Python 3.x
  **inspect.getfullargspec()** (instead of the legacy
  **inspect.getargspec()**) is used to inspect test method signatures.

* A compatibility fix: now standard *abstract base classes* of
  collections are imported from ``collections.abc``; import from
  ``collections`` is performed only as a fallback (relevant to Python
  2.7).

* Two bugfixes related to the **expand()** decorator:

  (1) now classes (type objects) and **Substitute** objects are
  skipped when scanning a test class for attributes that have
  **@foreach**-created marks;

  (2) **@foreach**-created marks are no longer retained on parameterized
  test methods generated by the **expand()**'s machinery.

  Thanks to these changes, it is now possible to apply **expand()** to
  subclasses of an **expand()**-ed class -- provided that **foreach()**
  has been applied only to test *methods* (not to test *classes*, which
  is a deprecated feature anyway -- see the *deprecation notice* above).

* A few bugfixes related to applying **foreach()** to test classes
  (which is a deprecated feature -- see the *deprecation notice* above):

  (1) a **foreach()**-decorated testclass which does not inherit from
  **unittest.TestCase** is no longer required to provide its own
  implementations of **setUp()** and **tearDown()** (previously
  **setUp()** and **tearDown()** provided by classes derived with
  **expand()** from such a class raised **AttributeError**);

  (2) now the ``context_targets`` attribute is set (to an empty list)
  also if there are no contexts (making it possible for test code to
  refer to ``self.context_targets`` without fear of **AttributeError**);

  (3) now a context's **__exit__()** is never called without the
  preceding **__enter__()** call being successful.

* A few petty really minor behaviora changes/improvements (in
  particular, now a *callable* parameter collection is required to
  satisfy the built-in **callable(...)** predicate, instead of the
  **isinstance(..., Callable)** condition).

* A few setup-related updates/improvements (in particular, the
  ``pyproject.toml`` file has been added).

* Several tests/documentation-related updates, fixes and improvements.

* TBD?...


0.3.1 (2014-08-19)
------------------

* Several tests/documentation-related fixes and improvements.


0.3.0 (2014-08-17)
------------------

* Improved signatures of the **foreach()** decorator and the
  **paramseq** constructor: they take either exactly one positional
  argument which must be a test parameter collection (as previously: a
  sequence/mapping/set or a **paramseq** instance, or a callable
  returning an iterable...), or *any number of positional and/or keyword
  arguments* being test parameters (singular parameter values, tuples of
  parameter values or **param** instances...).  For example,
  ``@foreach([1, 42])`` can now also be spelled as ``@foreach(1, 42)``.

* Several tests/documentation-related updates, fixes and improvements.


0.2.1 (2014-08-12)
------------------

* Important setup/configuration fixes (repairing 0.2.0 regressions):

  * a setup-breaking bug in *setup.py* has been fixed;
  * a bug in the configuration of Sphinx (the tool used to generate
    the documentation) has been fixed.

* Some setup-related cleanups.


0.2.0 (2014-08-11)
------------------

* Now **unittest_expander** is a one-file module, not a directory-based
  package.

* Some documentation improvements and updates.

* Some library setup improvements and refactorings.


0.1.2 (2014-08-01)
------------------

* The signatures of the **foreach()** decorator and the **paramseq**
  constructor have been unified.

* Tests/documentation-related updates and improvements.


0.1.1 (2014-07-29)
------------------

* Minor tests/documentation-related improvements.


0.1.0 (2014-07-29)
------------------

* Initial release.
